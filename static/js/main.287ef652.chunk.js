(this["webpackJsonpreact-blogpost"]=this["webpackJsonpreact-blogpost"]||[]).push([[0],{13:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(6),o=a.n(c),l=a(1),s=a(3),i=a(4),m=function(){function e(){Object(s.a)(this,e)}return Object(i.a)(e,null,[{key:"set",value:function(e,t){try{var a=JSON.stringify(t);localStorage.setItem(e,a)}catch(n){throw new Error(n.message)}}},{key:"get",value:function(e){try{var t=localStorage.getItem(e);return JSON.parse(t)||null}catch(a){throw new Error(a.message)}}},{key:"remove",value:function(e){try{localStorage.removeItem(e)}catch(t){throw new Error(t.message)}}}]),e}(),u=function(e){var t=e.tab,a=e.navSetTab,n=m.get("token");return r.a.createElement("div",{className:"card mb-3 nav"},r.a.createElement("div",{className:"card-header text-light bg-info"},t),r.a.createElement("div",{className:"card-body d-flex"},"Home"!==t&&r.a.createElement("button",{onClick:a.bind(null,"Home"),type:"button",className:"btn-dark"},"Home"),!n&&"Login"!==t&&r.a.createElement("button",{onClick:a.bind(null,"Login"),type:"button",className:"btn-dark"},"Login ",r.a.createElement("span",{className:"glyphicon glyphicon-log-in"})),!n&&"Registration"!==t&&r.a.createElement("button",{onClick:a.bind(null,"Registration"),type:"button",className:"btn-dark"},"Registration"),n&&"Workspace"!==t&&r.a.createElement("button",{onClick:a.bind(null,"Workspace"),type:"button",className:"btn-dark"},"Workspace"),r.a.createElement("div",{className:"w-100 d-flex justify-content-end"},n&&r.a.createElement("button",{onClick:function(){m.remove("user"),m.remove("token"),a("Login")},type:"button",className:"btn-danger justify-flex-end"},"Sign out"))))},d="https://it-blog-posts.herokuapp.com/api/",p="people/",b="people/login",f=function(){function e(){Object(s.a)(this,e)}return Object(i.a)(e,[{key:"get",value:function(){return fetch("".concat(d).concat(p))}},{key:"getById",value:function(e){return fetch("".concat(d).concat(p).concat(e)).then((function(e){return e.json()}))}},{key:"getUserPosts",value:function(e){return fetch("".concat(d).concat(p).concat(e,"/posts"))}},{key:"postLogin",value:function(e){return fetch("".concat(d).concat(b),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}},{key:"postRegister",value:function(e){return fetch("".concat(d).concat(p),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}}]),e}(),y=function(){function e(){Object(s.a)(this,e)}return Object(i.a)(e,[{key:"get",value:function(){return fetch("".concat(d).concat("posts/"))}},{key:"set",value:function(e){return fetch("".concat(d).concat("posts/"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}},{key:"update",value:function(e,t){return fetch("".concat(d).concat("posts/").concat(e),{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}},{key:"remove",value:function(e){return fetch("".concat(d).concat("posts/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}})}}]),e}(),v=new function e(){Object(s.a)(this,e),this.people=new f,this.posts=new y},E=function(e){var t=e.people;return r.a.createElement("div",null,t.map((function(e){return r.a.createElement("div",{className:"card mb-3",key:e.id},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.lastname),r.a.createElement("p",{className:"card-text"},e.username)))})))};var h=function(e){var t=e.posts,a=e.inWorkspace,n=e.removePost,c=e.updatePost;return r.a.createElement("div",{className:a?"d-flex flex-column-reverse":""},0===t.length?r.a.createElement("div",{className:"alert alert-secondary bg-warning",role:"alert"},"0 Posts found"):t.map((function(e){return r.a.createElement("div",{className:"card mb-3",key:e.id},r.a.createElement("div",{className:"card-body"},a&&r.a.createElement("div",null,r.a.createElement("button",{onClick:n.bind(null,e.id),type:"button",className:"close"},r.a.createElement("i",{className:"fa fa-trash"})),r.a.createElement("button",{onClick:c.bind(null,e),type:"button",className:"close mr-2"},r.a.createElement("i",{className:"fa fa-pencil"}))),r.a.createElement("h5",{className:"card-title"},e.title),r.a.createElement("p",{className:"card-text"},e.description)))})))},g=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),s=Object(l.a)(o,2),i=s[0],m=s[1];return Object(n.useEffect)((function(){v.people.get().then((function(e){return e.json()})).then((function(e){return c(e)})),v.posts.get().then((function(e){return e.json()})).then((function(e){return m(e)}))}),[]),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3"},r.a.createElement(E,{people:a})),r.a.createElement("div",{className:"col-9"},r.a.createElement(h,{updatePost:function(){},removePost:function(){},posts:i}))))},O=a(2);var j=function(e){var t=e.type,a=e.name,n=e.id,c=e.onHandleChange,o=e.onKeyPress;return r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:n},a),r.a.createElement("input",{name:a,onKeyPress:o,onChange:c,type:t,className:"form-control",id:n}))};function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var w=function(e){var t=e.navSetTab,a=Object(n.useState)({email:"",password:""}),c=Object(l.a)(a,2),o=c[0],s=c[1],i=Object(n.useState)({unauthorized:!1,empty:!1}),u=Object(l.a)(i,2),d=u[0],p=u[1],b=function(e){var t=e.target,a=t.id,n=t.value;s(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(Object(a),!0).forEach((function(t){Object(O.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},o,Object(O.a)({},a,n)))},f=function(e){e.email&&e.password?v.people.postLogin(e).then((function(e){if(!e.ok)throw new Error;return e.json()})).then((function(e){m.set("user",e.userId),m.set("token",e.id),t("Workspace")})).catch((function(){p({unauthorized:!0,empty:!1})})):p({unauthorized:!1,empty:!0})},y=function(e){13===e.charCode&&f(o)};return r.a.createElement("div",{className:"myForm d-flex flex-column justify-content-center align-items-center position-relative",style:{height:"450px"}},r.a.createElement("div",{className:"form-div text-center text-light"},r.a.createElement(j,{id:"email",name:"Email",type:"email",onKeyPress:y,onHandleChange:b}),r.a.createElement(j,{id:"password",name:"Password",onKeyPress:y,type:"password",onHandleChange:b}),r.a.createElement("button",{onClick:f.bind(null,o),type:"submit",className:"center-block btn btn-primary"},"Submit")),r.a.createElement("div",{className:"position-absolute",style:{bottom:"0"}},d.unauthorized&&r.a.createElement("div",{className:"alert alert-danger mb-0",role:"alert"},"Failed to log in. Wrong email or password"),d.empty&&r.a.createElement("div",{className:"alert alert-danger mb-0",role:"alert"},"Please enter your email and password")))};function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var P=function(e){var t=e.navSetTab,a=Object(n.useState)({username:"",lastname:"",email:"",password:""}),c=Object(l.a)(a,2),o=c[0],s=c[1],i=Object(n.useState)({incorrectData:!1,empty:!1}),m=Object(l.a)(i,2),u=m[0],d=m[1],p=function(e){var t=e.target,a=t.id,n=t.value;s(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){Object(O.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},o,Object(O.a)({},a,n)))};return r.a.createElement("div",{className:"myForm d-flex flex-column justify-content-center align-items-center position-relative",style:{height:"590px"}},r.a.createElement("div",{className:"form-div text-center text-light"},r.a.createElement(j,{id:"username",name:"Username",type:"text",onHandleChange:p}),r.a.createElement(j,{id:"lastname",name:"Lastname",type:"text",onHandleChange:p}),r.a.createElement(j,{id:"email",name:"Email",type:"email",onHandleChange:p}),r.a.createElement(j,{id:"password",name:"Password",type:"password",onHandleChange:p}),r.a.createElement("button",{onClick:function(e){e.username&&e.lastname&&e.email&&e.password?v.people.postRegister(e).then((function(e){if(!e.ok)throw new Error;return t("Login"),e.json()})).catch((function(){d({incorrectData:!0,empty:!1})})):d({incorrectData:!1,empty:!0})}.bind(null,o),type:"submit",className:"btn btn-primary"},"Submit")),r.a.createElement("div",{className:"position-absolute",style:{bottom:"0"}},u.incorrectData&&r.a.createElement("div",{className:"alert alert-danger mb-0",role:"alert"},"Please make sure all required fields are filled out correctly"),u.empty&&r.a.createElement("div",{className:"alert alert-danger mb-0",role:"alert"},"Please fill in all required fields")))};function S(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var C=function(e){var t=e.onShow,a=e.author,c=e.updating,o=e.event,s=Object(n.useState)({title:"UPDATE"!==o?"":c.title,description:"UPDATE"!==o?"":c.description}),i=Object(l.a)(s,2),u=i[0],d=i[1],p=function(e){var t=e.target,a=t.name,n=t.value;d(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?S(Object(a),!0).forEach((function(t){Object(O.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):S(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},u,Object(O.a)({},a,n)))};return r.a.createElement("div",{className:"myModalBack",onClick:function(e){e.stopPropagation(),"myModalBack"===e.target.className&&t()}},r.a.createElement("div",{className:"myModal"},r.a.createElement("div",{className:"modal-dialog"},r.a.createElement("div",{className:"modal-content"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("button",{onClick:t,type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{className:"modal-body"},r.a.createElement("form",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"recipient-name",className:"control-label"},"Title:"),r.a.createElement("input",{onChange:p,name:"title",value:u.title,type:"text",className:"form-control",id:"recipient-name"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"message-text",className:"control-label"},"Description:"),r.a.createElement("textarea",{onChange:p,name:"description",value:u.description,className:"form-control",id:"message-text"})))),r.a.createElement("div",{className:"modal-footer"},"UPDATE"===o?r.a.createElement("button",{onClick:function(e,n){var r={author:a,description:n.description,personId:m.get("user"),title:n.title};n.title&&n.description?(t(),v.posts.update(e,r).then((function(e){if(!e.ok)throw new Error;return e.json()})).catch((function(){alert("Invalid data")}))):alert("Please fill in the required fields:")}.bind(null,c.id,u),type:"button",className:"btn btn-primary"},"Update"):r.a.createElement("button",{onClick:function(e){var n={author:a,description:e.description,personId:m.get("user"),title:e.title};e.title&&e.description?(t("CREATE"),v.posts.set(n).then((function(e){if(!e.ok)throw new Error;return e.json()})).catch((function(){alert("Invalid data")}))):alert("Please fill in the required fields:")}.bind(null,u),type:"button",className:"btn btn-primary"},"Add"))))))},x=function(){var e=Object(n.useState)({}),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)([]),s=Object(l.a)(o,2),i=s[0],u=s[1],d=Object(n.useState)({show:!1,event:"CREATE"}),p=Object(l.a)(d,2),b=p[0],f=p[1],y=Object(n.useState)({id:0,title:"",descritption:""}),E=Object(l.a)(y,2),g=E[0],O=E[1],j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CREATE";f({show:!b.show,event:e})};return Object(n.useEffect)((function(){a.id||v.people.getById(m.get("user")).then((function(e){return c(e)})),a.id&&v.people.getUserPosts(a.id).then((function(e){return e.json()})).then((function(e){return u(e)}))}),[a,b,b.event]),r.a.createElement("div",{className:""},r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("div",{className:"card p-3",style:{border:"none"}},r.a.createElement("div",{className:"card-header d-flex justify-content-between align-items-center mb-4 text-primary"},"Welcome ",a.username,r.a.createElement("button",{onClick:j,type:"button",className:"btn btn-primary"},r.a.createElement("i",{className:"fa fa-plus-square"})," Create Post")),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement(h,{inWorkspace:!0,posts:i,removePost:function(e){v.posts.remove(e),u(i.filter((function(t){return t.id!==e})))},updatePost:function(e){O(e),j("UPDATE")}}))))),b.show&&r.a.createElement(C,{event:b.event,author:a.username,updating:g,onShow:j}))};var T=function(){var e=Object(n.useState)({tab:m.get("tab")||"Home"}),t=Object(l.a)(e,2),a=t[0],c=t[1],o=function(e){c({tab:e}),m.set("tab",e)};return r.a.createElement("div",{className:"App"},r.a.createElement(u,{tab:a.tab,navSetTab:o}),"Home"===a.tab&&r.a.createElement(g,null),"Login"===a.tab&&r.a.createElement(w,{navSetTab:o}),"Registration"===a.tab&&r.a.createElement(P,{navSetTab:o}),"Workspace"===a.tab&&r.a.createElement(x,null))};a(12),a(13),a(14);o.a.render(r.a.createElement(T,null),document.getElementById("root"))},7:function(e,t,a){e.exports=a(15)}},[[7,1,2]]]);
//# sourceMappingURL=main.287ef652.chunk.js.map